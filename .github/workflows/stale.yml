name: ğŸ—‘ï¸ Gerenciar Issues e PRs Inativos

on:
  schedule:
    # Executa diariamente Ã s 2:00 UTC (23:00 BRT)
    - cron: '0 2 * * *'
  workflow_dispatch: # Permite execuÃ§Ã£o manual

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    name: Marcar e Fechar Itens Inativos
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ—‘ï¸ Processar issues e PRs inativos
        uses: actions/stale@v9
        with:
          # ConfiguraÃ§Ãµes gerais
          repo-token: ${{ secrets.GITHUB_TOKEN }}

          # ConfiguraÃ§Ã£o para Issues
          days-before-issue-stale: 60
          days-before-issue-close: 14
          stale-issue-label: 'stale'
          exempt-issue-labels: 'pinned,keep-open,in-progress,blocked,waiting-for-response'

          stale-issue-message: |
            ğŸ‘‹ OlÃ¡! Esta issue estÃ¡ inativa hÃ¡ 60 dias.

            Esta issue serÃ¡ automaticamente fechada em 14 dias se nÃ£o houver atividade adicional.

            Se vocÃª ainda estÃ¡ trabalhando nisto ou acredita que a issue ainda Ã© relevante,
            por favor adicione um comentÃ¡rio para mantÃª-la aberta.

            Para evitar que esta issue seja marcada como inativa no futuro, vocÃª pode:
            - Adicionar a label `keep-open` se for importante de longo prazo
            - Adicionar a label `in-progress` se estiver trabalhando ativamente
            - Adicionar comentÃ¡rios regulares sobre o progresso

            Obrigado por contribuir! ğŸ™

          close-issue-message: |
            ğŸ”’ Esta issue foi fechada automaticamente por inatividade.

            Se vocÃª acredita que esta issue ainda Ã© relevante, sinta-se livre para:
            - Reabrir esta issue com contexto atualizado
            - Criar uma nova issue referenciando esta
            - Entrar em contato com os mantenedores

            Obrigado! âœ¨

          # ConfiguraÃ§Ã£o para Pull Requests
          days-before-pr-stale: 30
          days-before-pr-close: 7
          stale-pr-label: 'stale'
          exempt-pr-labels: 'pinned,keep-open,in-review,blocked,work-in-progress'

          stale-pr-message: |
            ğŸ‘‹ OlÃ¡! Este Pull Request estÃ¡ inativo hÃ¡ 30 dias.

            Este PR serÃ¡ automaticamente fechado em 7 dias se nÃ£o houver atividade adicional.

            Se vocÃª ainda estÃ¡ trabalhando neste PR:
            - Por favor atualize o branch com `main`
            - Resolva conflitos de merge se houver
            - Responda a comentÃ¡rios de revisÃ£o pendentes
            - Adicione a label `work-in-progress` se ainda estiver desenvolvendo

            Se precisar de ajuda ou tiver dÃºvidas, nÃ£o hesite em perguntar! ğŸ’¬

            Obrigado por contribuir! ğŸ™

          close-pr-message: |
            ğŸ”’ Este Pull Request foi fechado automaticamente por inatividade.

            Se vocÃª ainda deseja que estas mudanÃ§as sejam merged:
            - Reabra este PR com o branch atualizado
            - Crie um novo PR com as mudanÃ§as
            - Entre em contato com os mantenedores para assistÃªncia

            Seu trabalho Ã© valorizado! NÃ£o hesite em retornar quando estiver pronto. âœ¨

          # ConfiguraÃ§Ãµes adicionais
          operations-per-run: 100
          remove-stale-when-updated: true
          ascending: true

          # Labels de exemÃ§Ã£o automÃ¡tica por milestone
          exempt-all-milestones: false

          # ConfiguraÃ§Ã£o de debug (ativar se necessÃ¡rio)
          debug-only: false
